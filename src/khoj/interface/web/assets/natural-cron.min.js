!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).getCronString=e()}(function(){return function r(a,o,s){function u(n,e){if(!o[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(i)return i(n,!0);throw(t=new Error("Cannot find module '"+n+"'")).code="MODULE_NOT_FOUND",t}t=o[n]={exports:{}},a[n][0].call(t.exports,function(e){return u(a[n][1][e]||e)},t,t.exports,r,a,o,s)}return o[n].exports}for(var i="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,n,t){"use strict";const a=e("./maps").regexString;var s=e("./maps").defaultFlags,u=e("./maps").defaultResultCron,i=e("./maps").flags,c=e("./maps").resultCron;const f=e("./tokens").tokenizeInput,r=e("./states/clocktime").getClockTime,o=e("./states/day").getDay,l=e("./states/frequency").getFrequencyOnly,g=e("./states/frequency").getFrequencyWith,y=e("./states/hour").getHour,d=e("./states/month").getMonth,h=e("./states/minute").getMinute,m=e("./states/range").rangeStartState,p=e("./states/range").rangeEndState,w=e("./states/year").getYear;function x(e,n,t){switch(function(n){let t="decideState";for(var r in a){let e=new RegExp(a[r].regextest,"ig");if(e.test(n)){t=r;break}}return t}(e)){case"frequencyWith":return g(e,n,t);case"frequencyOnly":return l(e,n,t);case"clockTime":return r(e,n,t);case"day":return o(e,n,t);case"minute":return h(e,n,t);case"hour":return y(e,n,t);case"month":return d(e,n,t);case"year":return w(e,n,t);case"rangeStart":return m(e,n,t);case"rangeEnd":return p(e,n,t)}return!0}n.exports=function(e,n){n=void 0!==n?n:"MIN HOR DOM MON WEK YER",i.isRangeForDay=s.isRangeForDay,i.isRangeForMonth=s.isRangeForMonth,i.isRangeForYear=s.isRangeForYear,i.isRangeForHour=s.isRangeForHour,i.isRangeForMin=s.isRangeForMin,c.min=u.min,c.hour=u.hour,c.day_of_month=u.day_of_month,c.month=u.month,c.day_of_week=u.day_of_week,c.year=u.year;var t=[];let r="";var a=f(e);null==a&&(r+="Please enter human readable rules !\n");let o=!0;for(let e=0;o&&e<a.length;e++)o=x(a[e],t,r);return 0==o?"ERROR:"+r+"\t\t"+n.replace("MIN",c.min).replace("HOR",c.hour).replace("DOM",c.day_of_month).replace("MON",c.month).replace("WEK",c.day_of_week).replace("YER",c.year):n.replace("MIN",c.min).replace("HOR",c.hour).replace("DOM",c.day_of_month).replace("MON",c.month).replace("WEK",c.day_of_week).replace("YER",c.year)}},{"./maps":2,"./states/clocktime":3,"./states/day":4,"./states/frequency":5,"./states/hour":6,"./states/minute":7,"./states/month":8,"./states/range":9,"./states/year":10,"./tokens":11}],2:[function(e,n,t){"use strict";var r={isRangeForDay:!1,isRangeForMonth:!1,isRangeForYear:!1,isRangeForHour:!1,isRangeForMin:!1},a={min:"*",hour:"*",day_of_month:"*",month:"*",day_of_week:"?",year:"*"},o={isRangeForDay:r.isRangeForDay,isRangeForMonth:r.isRangeForMonth,isRangeForYear:r.isRangeForYear,isRangeForHour:r.isRangeForHour,isRangeForMin:r.isRangeForMin},s={min:a.min,hour:a.hour,day_of_month:a.day_of_month,month:a.month,day_of_week:a.day_of_week,year:a.year};n.exports={regexString:{every:{regextest:"^(every|each|all|entire)$"},clockTime:{regextest:"^([0-9]+:)?[0-9]+ *(AM|PM)$|^([0-9]+:[0-9]+)$|(noon|midnight)",regexexec:["^[0-9]+",":[0-9]+","pm","am","(noon|midnight)"]},year:{regextest:"((years|year)|([0-9]{4}[0-9]*(( ?and)?,? ?))+)",regexexec:["^(years|year)$","[0-9]*","^[0-9]{4}$"]},frequencyWith:{regextest:"^[0-9]+(th|nd|rd|st)$"},frequencyOnly:{regextest:"^[0-9]+$",regexexec:"^[0-9]+"},minute:{regextest:"(minutes|minute|mins|min)",regexexec:["^(minutes|minute|mins|min)$"]},hour:{regextest:"(hour|hrs|hours)",regexexec:["^(hour|hrs|hours)$"]},day:{regextest:"^((days|day)|(((monday|tuesday|wednesday|thursday|friday|saturday|sunday|WEEKEND|MON|TUE|WED|THU|FRI|SAT|SUN)( ?and)?,? ?)+))$",regexexec:["^(day|days)$","(MON|TUE|WED|THU|FRI|SAT|SUN|WEEKEND)"]},month:{regextest:"^((months|month)|(((january|february|march|april|may|june|july|august|september|october|november|december|JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEPT|OCT|NOV|DEC)( ?and)?,? ?)+))$",regexexec:["^(month|months)$","(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEPT|OCT|NOV|DEC)"]},rangeStart:{regextest:"(between|starting|start)"},rangeEnd:{regextest:"(to|through|ending|end|and)"},tokenising:{regexexec:"(hour|hrs|hours)|(minutes|minute|mins|min)|((months|month)|(((january|february|march|april|may|june|july|august|september|october|november|december|JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEPT|OCT|NOV|DEC)( ?and)?,? ?)+))|[0-9]+(th|nd|rd|st)|(([0-9]+:)?[0-9]+( +)?(AM|PM))|([0-9]+:[0-9]+)|(noon|midnight)|((days|day)|(((monday|tuesday|wednesday|thursday|friday|saturday|sunday|WEEKEND|MON|TUE|WED|THU|FRI|SAT|SUN)( ?and)?,? ?)+))|(([0-9]{4}[0-9]*(( ?and)?,? ?))+)|([0-9]+)|(to|through|ending|end|and)|(between|starting|start)"}},defaultFlags:r,defaultResultCron:a,flags:o,resultCron:s}},{}],3:[function(e,n,t){"use strict";var f=e("../maps").regexString,l=e("../maps").flags,g=e("../maps").resultCron;n.exports={getClockTime:function(e,n,t){let r=new RegExp(f.clockTime.regexexec[0]),a=e.match(r),o,s;if(o=null!=a&&0<a.length?parseInt(a[0]):0,r=new RegExp(f.clockTime.regexexec[1]),a=r.exec(e),null!=a&&0<a.length)if(-1!=a[0].indexOf(":")){if(s=parseInt(a[0].slice(a[0].indexOf(":")+1)),60<=s)return t+=" please enter correct minutes !",!1}else s=0;else s=0;let u=new RegExp(f.clockTime.regexexec[2],"ig"),i=new RegExp(f.clockTime.regexexec[3],"ig");if(u.test(e)){if(o<12)o+=12;else if(12<o)return t+=" please correct the time before PM !",!1}else if(i.test(e))if(12==o)o=0;else if(12<o)return t+=" please correct the time before AM !",!1;r=new RegExp(f.clockTime.regexexec[4],"ig"),r.test(e)&&(a=e.match(r),s=(o="noon"==a?12:0,0));let c=n[n.length-1];if(null!=c){if(1==l.isRangeForHour||1==l.isRangeForMin)return t+=" already set for range expressions, seperate into two crons!",!1;if("rangeStart"==c.ownerState)return c.hour.start=o,c.min.start=s,n.pop(),n.push(c),!0;if("rangeEnd"==c.ownerState)return c.hour==o?(c.min.end=s,g.min=c.min.start+"-"+c.min.end):(c.hour.end=o,g.hour=c.hour.start+"-"+c.hour.end),!0}return t={ownerState:"clockTime",hour:o,min:s},g.min=s,"*"!=g.hour&&""!=g.hour?g.hour+=","+o:g.hour=o,n.push(t),!0}}},{"../maps":2}],4:[function(e,n,t){"use strict";var o=e("../maps").regexString,s=e("../maps").flags,u=e("../maps").resultCron;n.exports={getDay:function(e,t,r){let a=new RegExp(o.day.regexexec[0],"ig");if(a.test(e)){let e=t[t.length-1];u.day_of_week="?",null==e?e={frequency:"*"}:"frequencyOnly"==e.ownerState?(u.day_of_month="0/"+e.frequency,t.pop()):"frequencyWith"==e.ownerState?(u.day_of_month=""+e.frequency,t.pop()):u.day_of_month="*"}else{a=new RegExp(o.day.regexexec[1],"ig");let n=e.match(a);if(null==n||0==n.length)return r+=" In unresolved state at 2;Day !",!1;{u.day_of_week="";for(let e=0;e<n.length;e++)n[e]=n[e].toUpperCase();let e=t[t.length-1];if(1==n.length&&null!=e){if(1==s.isRangeForDay)return r+=" already set for range expressions, seperate into two crons!",!1;if(t.pop(),"rangeStart"==e.ownerState)return e.day.start=n[0],t.push(e),!0;if("rangeEnd"==e.ownerState)return e.day.end=n[0],u.day_of_week=e.day.start+"-"+e.day.end,u.day_of_month="?",!0}n.includes("MON")&&!u.day_of_week.includes("MON")&&(u.day_of_week+="MON,"),n.includes("TUE")&&!u.day_of_week.includes("TUE")&&(u.day_of_week+="TUE,"),n.includes("WED")&&!u.day_of_week.includes("WED")&&(u.day_of_week+="WED,"),n.includes("THU")&&!u.day_of_week.includes("THU")&&(u.day_of_week+="THU,"),n.includes("FRI")&&!u.day_of_week.includes("FRI")&&(u.day_of_week+="FRI,"),n.includes("SAT")&&!u.day_of_week.includes("SAT")&&(u.day_of_week+="SAT,"),n.includes("SUN")&&!u.day_of_week.includes("SUN")&&(u.day_of_week+="SUN,"),n.includes("WEEKEND")&&!u.day_of_week.includes("SAT")&&(u.day_of_week+="SAT,"),n.includes("WEEKEND")&&!u.day_of_week.includes("SUN")&&(u.day_of_week+="SUN,"),u.day_of_week=u.day_of_week.slice(0,-1),u.day_of_month="?",u.day_of_week}}return r={ownerState:"day",day_of_week:u.day_of_week,day_of_month:u.day_of_month},t.push(r),!0}}},{"../maps":2}],5:[function(e,n,t){"use strict";var a=e("../maps").regexString;e("../maps").flags,e("../maps").resultCron;n.exports={getFrequencyOnly:function(e,n,t){var r=parseInt(e);if(isNaN(e))return!1;if(0<n.length&&"rangeEnd"==n[n.length-1].ownerState){let e=n[n.length-1];return n.pop(),e.frequency.end=r,n.push(e),!0}if(0<n.length&&"rangeStart"==n[n.length-1].ownerState){let e=n[n.length-1];return n.pop(),e.frequency.start=r,n.push(e),!0}return r={ownerState:"frequencyOnly",frequency:r},n.push(r),!0},getFrequencyWith:function(n,t,e){let r=new RegExp(a.frequencyOnly.regexexec,"ig");if(n=r.exec(n),n=parseInt(n),isNaN(n))return!1;if(0!=t.length&&"rangeEnd"==t[t.length-1].ownerState){let e=t[t.length-1];return t.pop(),e.frequency.end=""+n,t.push(e),!0}if(0<t.length&&"rangeStart"==t[t.length-1].ownerState){let e=t[t.length-1];return t.pop(),e.frequency.start=""+n,t.push(e),!0}return n={ownerState:"frequencyWith",frequency:n},t.push(n),!0}}},{"../maps":2}],6:[function(e,n,t){"use strict";var o=e("../maps").regexString,s=e("../maps").flags,u=e("../maps").resultCron;n.exports={getHour:function(e,n,t){let r=new RegExp(o.hour.regexexec[0],"ig"),a;if(r.test(e)){let e=n[n.length-1];if(null==e)e={frequency:"*"};else if("frequencyOnly"==e.ownerState)a=e.frequency,u.hour="0/"+e.frequency,n.pop();else if("frequencyWith"==e.ownerState)"*"!=u.hour&&""!=u.hour?u.hour+=","+e.frequency:u.hour=""+e.frequency,a=u.hour,n.pop();else{if(1==s.isRangeForHour)return t+=" already set for range expressions, seperate into two crons!",!1;if("rangeStart"==e.ownerState)return e.hour.start=e.frequency.start,e.frequency.start="",n.pop(),n.push(e),!0;if("rangeEnd"==e.ownerState)return n.pop(),e.hour.start=e.frequency.start,e.hour.end=e.frequency.end,e.frequency.end="",u.hour=e.hour.start+"-"+e.hour.end,!0}}return t={ownerState:"hour",hour:a},n.push(t),!0}}},{"../maps":2}],7:[function(e,n,t){"use strict";var o=e("../maps").regexString,s=e("../maps").flags,u=e("../maps").resultCron;n.exports={getMinute:function(e,n,t){let r=new RegExp(o.minute.regexexec[0],"ig"),a;if(r.test(e)){let e=n[n.length-1];if(null==e)e={frequency:"*"};else if("frequencyOnly"==e.ownerState)a=e.frequency,u.min="0/"+e.frequency,n.pop();else if("frequencyWith"==e.ownerState)a=e.frequency,u.min=""+e.frequency,n.pop();else{if(1==s.isRangeForMinute)return t+=" already set for range expressions, seperate into two crons!",!1;if("rangeStart"==e.ownerState)return e.min.start=e.frequency.start,e.frequency.start="",n.pop(),n.push(e),!0;if("rangeEnd"==e.ownerState)return n.pop(),e.min.start=e.frequency.start,e.min.end=e.frequency.end,e.frequency.end="",u.min=e.min.start+"-"+e.min.end,!0}}return t={ownerState:"minute",min:a},n.push(t),!0}}},{"../maps":2}],8:[function(e,n,t){"use strict";var o=e("../maps").regexString,s=e("../maps").flags,u=e("../maps").resultCron;n.exports={getMonth:function(e,t,r){let a=new RegExp(o.month.regexexec[0],"ig");if(a.test(e)){let e=t[t.length-1];null==e&&(e={frequency:"*"}),"frequencyOnly"==e.ownerState?(u.month="0/"+e.frequency,t.pop()):"frequencyWith"==e.ownerState?(u.month=""+e.frequency,t.pop()):u.month="*"}else{a=new RegExp(o.month.regexexec[1],"ig");let n=e.match(a);if(null==n||0==n.length)return r+=" In unresolved state at 2;Month !",!1;{u.month="";for(let e=0;e<n.length;e++)n[e]=n[e].toUpperCase();let e=t[t.length-1];if(1==n.length&&null!=e){if(1==s.isRangeForMonth)return r+=" already set for range expressions, seperate into two crons!",!1;if(t.pop(),"frequencyOnly"==e.ownerState)u.day_of_month=e.frequency;else if("frequencyWith"==e.ownerState)u.day_of_month=e.frequency;else{if("rangeStart"==e.ownerState)return e.month.start=n[0],t.push(e),!0;if("rangeEnd"==e.ownerState)return""!=e.frequency.end&&(u.day_of_week="?",u.day_of_month=e.frequency.start+"-"+e.frequency.end),e.month.end=n[0],u.month=e.month.start+"-"+e.month.end,!0}}n.includes("JAN")&&!u.month.includes("JAN")&&(u.month+="JAN,"),n.includes("FEB")&&!u.month.includes("FEB")&&(u.month+="FEB,"),n.includes("MAR")&&!u.month.includes("MAR")&&(u.month+="MAR,"),n.includes("APR")&&!u.month.includes("APR")&&(u.month+="APR,"),n.includes("MAY")&&!u.month.includes("MAY")&&(u.month+="MAY,"),n.includes("JUN")&&!u.month.includes("JUN")&&(u.month+="JUN,"),n.includes("JUL")&&!u.month.includes("JUL")&&(u.month+="JUL,"),n.includes("AUG")&&!u.month.includes("AUG")&&(u.month+="AUG,"),n.includes("SEPT")&&!u.month.includes("SEPT")&&(u.month+="SEPT,"),n.includes("OCT")&&!u.month.includes("OCT")&&(u.month+="OCT,"),n.includes("NOV")&&!u.month.includes("NOV")&&(u.month+="NOV,"),n.includes("DEC")&&!u.month.includes("DEC")&&(u.month+="DEC,"),u.month=u.month.slice(0,-1),u.month}}return r={ownerState:"month",month:u.month},t.push(r),!0}}},{"../maps":2}],9:[function(e,n,t){"use strict";e("../maps").regexString;var r=e("../maps").flags;e("../maps").resultCron;n.exports={rangeStartState:function(e,n,t){return!(r.isRangeForDay||r.isRangeForMin||r.isRangeForMonth||r.isRangeForYear||r.isRangeForHour)&&(n.push({ownerState:"rangeStart",min:{start:"",end:""},hour:{start:"",end:""},day:{start:"",end:""},month:{start:"",end:""},year:{start:"",end:""},frequency:{start:"",end:""}}),!0)},rangeEndState:function(e,n,t){let r={ownerState:"rangeEnd",min:{start:"",end:""},hour:{start:"",end:""},day:{start:"",end:""},month:{start:"",end:""},year:{start:"",end:""},frequency:{start:"",end:""}},a=n[n.length-1];if(null!=a)switch(a.ownerState){case"frequencyWith":case"frequencyOnly":n.pop(),r.frequency.start=a.frequency,r.ownerState="rangeEnd",n.push(r);break;case"clockTime":n.pop(),r.hour.start=a.hour,r.min.start=a.min,r.ownerState="rangeEnd",n.push(r);break;case"rangeStart":n.pop(),a.ownerState="rangeEnd",n.push(a);break;case"month":n.pop(),r.ownerState="rangeEnd",r.month.start=a.month,n.push(r);break;case"minute":n.pop(),r.ownerState="rangeEnd",r.frequency.start=r.min.start=a.min,n.push(r);break;case"hour":n.pop(),r.ownerState="rangeEnd",r.frequency.start=r.hour.start=a.hour,n.push(r);break;case"day":n.pop(),r.ownerState="rangeEnd",r.day.start=a.day_of_week,n.push(r);break;case"year":n.pop(),r.ownerState="rangeEnd",r.year.start=a.year,n.push(r)}return!0}}},{"../maps":2}],10:[function(e,n,t){"use strict";var i=e("../maps").regexString,c=e("../maps").flags,f=e("../maps").resultCron;n.exports={getYear:function(a,o,s){let u=new RegExp(i.year.regexexec[0],"ig");if(u.test(a)){let e=o[o.length-1];f.year="?",null==e?e={frequency:"*"}:"frequencyOnly"==e.ownerState?(f.year="0/"+e.frequency,o.pop()):"frequencyWith"==e.ownerState?(f.year=""+e.frequency,o.pop()):f.year="*"}else{u=new RegExp(i.year.regexexec[1],"ig");let n=new RegExp(i.year.regexexec[2],"ig"),t=a.match(u),r=new Set;for(let e=0;e<t.length;e++)n.test(t[e])&&r.add(t[e].match(n)[0]);let e=o[o.length-1];if(1==r.size&&null!=e){if(1==c.isRangeForYear)return s+=" Cannot handle multiple range expressions, seperate into two crons!",!1;if("rangeStart"==e.ownerState)return e.year.start=Array.from(r)[0],o.pop(),o.push(e),!0;if("rangeEnd"==e.ownerState)return e.year.end=Array.from(r)[0],o.pop(),f.year=e.year.start+"-"+e.year.end,!0}if(0==r.size)return s+=" In unresolved state at 2;year !",!1;f.year="",r.forEach(function(e){f.year+=e+","}),f.year=f.year.slice(0,-1),f.year}return s={ownerState:"year",year:f.year},o.push(s),!0}}},{"../maps":2}],11:[function(e,n,t){"use strict";var r=e("./maps").regexString;e("./maps").flags,e("./maps").resultCron;n.exports={tokenizeInput:function(e){var n=new RegExp(r.tokenising.regexexec,"ig");let t=e.match(n);if(null==t||0==t.length)return[];for(let e=0;e<t.length;e++)t[e]=(t[e]+"").trim();return t}}},{"./maps":2}]},{},[1])(1)});
